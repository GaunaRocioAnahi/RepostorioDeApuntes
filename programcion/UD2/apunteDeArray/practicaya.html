<script>
    // 1. Crear tablero interno aleatorio
let tablero = [];
let bombas = 0;

for (let i = 0; i < 10; i++) {
    let r = Math.floor(Math.random() * 2); // 0 o 1
    
    if (bombas < 5) {
        tablero.push(r);
        if (r == 1) bombas++;
    } else {
        tablero.push(0); // si ya hay 5 bombas, el resto debe ser seguro
    }
}

// asegurar que haya al menos 1 bomba
if (bombas == 0) {
    tablero[ Math.floor(Math.random() * 10) ] = 1;
}

// 2. Tablero visible (9 = oculto)
let visible = [9,9,9,9,9,9,9,9,9,9];

// 3. Control de juego
let jugadorActual = 1; // 1 = Mario, 2 = Luis
let juegoTerminado = 0;

console.log("TABLERO INTERNO:", tablero);
console.log("TABLERO VISIBLE:", visible);

while (juegoTerminado == 0) {

    console.log("Turno del jugador:", (jugadorActual == 1 ? "Mario" : "Luis"));

    let pos = Number(prompt("Elige una tuber칤a (0 a 9):"));

    // Validar posici칩n fuera del rango
    while (pos < 0 || pos > 9) {
        pos = Number(prompt("Posici칩n inv치lida. Elige entre 0 y 9:"));
    }

    // Validar si est치 descubierta
    while (visible[pos] != 9) {
        pos = Number(prompt("Esa tuber칤a ya est치 descubierta. Elige otra:"));
        while (pos < 0 || pos > 9) {
            pos = Number(prompt("Posici칩n inv치lida. Elige entre 0 y 9:"));
        }
    }

    // Revisar si hay bomba
    if (tablero[pos] == 1) {
        console.log("游눤 BOOM! El jugador", (jugadorActual == 1 ? "Mario" : "Luis"), "revel칩 una bomba.");
        console.log("FIN DEL JUEGO");
        juegoTerminado = 1;
    } else {
        // Marcar posici칩n segura
        visible[pos] = 0;

        console.log("Posici칩n segura!");
        console.log("TABLERO VISIBLE:", visible);

        // Comprobar si ganan juntos
        let segurasTotales = 0;
        let segurasDescubiertas = 0;

        for (let i = 0; i < 10; i++) {
            if (tablero[i] == 0) segurasTotales++;
            if (tablero[i] == 0 && visible[i] == 0) segurasDescubiertas++;
        }

        if (segurasTotales == segurasDescubiertas) {
            console.log("游꿀 춰GANARON JUNTOS! Todas las tuber칤as seguras fueron reveladas.");
            juegoTerminado = 1;
        } else {
            // cambiar de jugador
            if (jugadorActual == 1) {
                jugadorActual = 2;
            } else {
                jugadorActual = 1;
            }
        }
    }
}

</script>